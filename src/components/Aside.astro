---
import { useTranslations } from '../i18n/util';
export interface Props {
	type?: 'note' | 'tip' | 'caution' | 'danger' | 'announcement';
	title?: string;
}

const t = useTranslations(Astro);
const { type = 'note', title = t(`aside.${type}`) } = Astro.props as Props;

// SVG icon paths based on GitHub Octicons
const icons: Record<NonNullable<Props['type']>, { viewBox: string; d: string[] }> = {
	note: {
		viewBox: '0 0 32 32',
		d: [
			'M20.52 1.608a2.074 2.074 0 0 0-2.935 0l-1.11 1.11a3.621 3.621 0 0 0-.6 4.32L12.528 10.4a4.984 4.984 0 0 0-6.243.659l-.91.91a2.34 2.34 0 0 0 0 3.304l4.695 4.695l-7.688 7.688c-.51.51-.51 1.33 0 1.84s1.33.51 1.84 0l7.688-7.688l4.585 4.585c.91.91 2.394.91 3.305 0l.91-.91a4.984 4.984 0 0 0 .662-6.236l3.35-3.363a3.609 3.609 0 0 0 4.328-.59l1.11-1.11c.81-.811.81-2.125 0-2.935l-9.64-9.64ZM19 3.022c.03-.03.076-.03.105 0l9.64 9.64c.03.03.03.076 0 .106l-1.11 1.11c-.63.63-1.646.63-2.275 0l-.734-.733l-.014.014l-6.351-6.38l-.005.004l-.366-.365a1.62 1.62 0 0 1 0-2.286L19 3.022Zm-1.097 4.814l6.004 6.031l-4.578 4.596l-6.003-6.03l4.577-4.597Zm1.336 11.954l.003-.003l.08.081a2.983 2.983 0 0 1-.027 4.2l-.91.91a.34.34 0 0 1-.475 0L6.79 13.858a.34.34 0 0 1 0-.476l.91-.91a2.984 2.984 0 0 1 4.205-.02l.708.695l.007-.006l6.62 6.65Z',
		],
	},
	tip: {
		viewBox: '0 0 32 32',
		d: [
			'M27.977 20.215L27.8 4.676a3.65 3.65 0 0 0-7.3.012v4.829a3.405 3.405 0 0 0-.365-.107c-.04-.01-.081-.016-.121-.024a3.453 3.453 0 0 0-.68-.074h-.012c-.22 0-.44.022-.657.063c-.058.011-.113.033-.17.046c-.161.035-.32.08-.476.135c-.067.025-.129.061-.194.09c-.141.059-.28.126-.413.2c-.073.043-.138.1-.208.144c-.118.076-.231.16-.34.249c-.073.063-.137.136-.205.205a3.69 3.69 0 0 0-.263.282l-.147-.109c-.047-.034-.075-.043-.112-.066a3.59 3.59 0 0 0-.447-.236c-.06-.027-.122-.05-.184-.074a3.553 3.553 0 0 0-.448-.135c-.063-.015-.123-.032-.187-.044a3.68 3.68 0 0 0-.66-.065H14.2c-.238 0-.476.024-.71.07c-.074.014-.142.043-.215.062a3.738 3.738 0 0 0-.449.136c-.081.033-.155.079-.234.117a3.69 3.69 0 0 0-.369.2c-.079.051-.149.112-.223.169a3.48 3.48 0 0 0-.307.246c-.071.068-.132.144-.2.217a3.71 3.71 0 0 0-.243.288c-.043.06-.081.124-.121.188a3.792 3.792 0 0 0-1.773-.439h-.011c-.057 0-.111.013-.168.016c-.057.003-.1-.016-.15-.016h-.009a3.439 3.439 0 0 0-3.348 3.514v5.905C5.67 26.439 10.549 31 16.835 31a10.804 10.804 0 0 0 11.142-10.773v-.012ZM21 19.919a.987.987 0 0 0-.4-.133c-.03 0-.058 0-.088-.005a5.031 5.031 0 0 0-1.112-.125a1.7 1.7 0 0 1-1.8-1.234a1.592 1.592 0 0 1-.04-.352c.002-.108.014-.217.035-.323a1.523 1.523 0 0 1 1.388-1.247a12.44 12.44 0 0 1 2.783.3l.5.121c.977.243 1.83.836 2.4 1.666c.845 1.382 1.106 3.858.519 4.907a.66.66 0 0 1-.644.407c-.422 0-.564-.167-1.012-1.194A4.482 4.482 0 0 0 21 19.919ZM24.109 3A1.6 1.6 0 0 1 25.8 4.688V4.7l.142 12.257A6.3 6.3 0 0 0 23 15.077v-2.239a3.275 3.275 0 0 0-.5-1.676V4.688A1.625 1.625 0 0 1 24.109 3Zm-4.775 8.312c.123.001.245.018.364.049c.036.009.071.023.107.035a1.713 1.713 0 0 1 .554.295c.036.029.072.057.107.089c.065.06.125.125.18.194c.212.24.338.544.358.864v1.8c-.35-.046-.711-.08-1.088-.1a18.773 18.773 0 0 0-.768-.029c-.05 0-.094-.005-.144-.005h-.111c-.362 0-.72.064-1.061.188v-1.131a3.464 3.464 0 0 0-.146-.95c.007-.038.012-.075.021-.112c.017-.06.037-.12.062-.178c.014-.033.025-.066.041-.1c.028-.054.06-.107.095-.157c.022-.033.041-.067.065-.1s.073-.081.111-.121c.038-.04.063-.07.1-.1c.037-.03.076-.058.115-.087a1.37 1.37 0 0 1 .132-.094c.039-.024.082-.041.123-.062c.041-.021.1-.053.155-.074c.05-.017.1-.032.152-.044c.05-.014.1-.032.149-.042c.105-.02.213-.03.32-.031l.007.003ZM14.209 12c.154.002.307.025.454.069c.031.009.063.017.093.028c.136.046.266.109.386.188c.012.008.021.018.033.027c.103.075.197.162.279.26c.021.025.043.048.062.074c.054.077.1.16.14.245v4.333c-.007.032-.005.068-.011.1a3.5 3.5 0 0 0-.082.742c0 .129.026.249.038.373a1.607 1.607 0 0 1-1.391.791h-.01a1.586 1.586 0 0 1-1.62-1.561v-4.108c.002-.075.01-.15.023-.223c.007-.044.012-.087.023-.13c.014-.055.031-.11.051-.163c.015-.039.028-.079.045-.117c.025-.051.052-.1.082-.149c.022-.036.042-.073.067-.108a1.64 1.64 0 0 1 .107-.127c.029-.033.057-.067.088-.1c.041-.036.084-.07.129-.1c.036-.028.069-.057.107-.082c.05-.03.1-.056.152-.08c.04-.02.077-.043.119-.06a1.68 1.68 0 0 1 .191-.058c.037-.01.072-.024.11-.031c.107-.022.216-.033.326-.033h.009ZM7.67 17.8v-3.035a1.574 1.574 0 0 1 1.5-1.5a1.458 1.458 0 0 1 1.205 1.5V17.8a1.44 1.44 0 0 1-1.357 1.514A1.44 1.44 0 0 1 7.67 17.8ZM16.835 29c-5.183 0-8.954-3.608-9.147-7.982c.42.193.877.294 1.339.294a3.264 3.264 0 0 0 2.521-1.226a3.636 3.636 0 0 0 2.65 1.148h.011c.106 0 .209-.014.314-.023a14.038 14.038 0 0 0-1.94 1.6a1.001 1.001 0 1 0 1.4 1.432a9.038 9.038 0 0 1 3.13-2.143a7 7 0 0 1 3.139-.332c.744.23 1.042.818 1.447 1.745a3.348 3.348 0 0 0 2.231 2.334A9.128 9.128 0 0 1 16.835 29Z',
		],
	},
	caution: {
		viewBox: '0 0 32 32',
		d: [
			'M15.999 22.898c-.78 0-1.4-.63-1.4-1.4v-9.17c0-.78.63-1.4 1.4-1.4c.78 0 1.4.63 1.4 1.4v9.16a1.4 1.4 0 0 1-1.4 1.41Zm1.4 2.579a1.4 1.4 0 1 1-2.8 0a1.4 1.4 0 0 1 2.8 0Z',
			'M13.976 5.163c.906-1.55 3.14-1.55 4.046 0l.003.005l12.664 21.937c.882 1.556-.222 3.503-2.03 3.503H3.339c-1.807 0-2.915-1.959-2.028-3.508l.002-.003l12.66-21.93l.002-.004Zm1.727 1.007v.002L3.046 28.095h-.001a.343.343 0 0 0 .293.513h25.32a.34.34 0 0 0 .291-.515L16.296 6.172l-.001-.002a.342.342 0 0 0-.592 0Z',
		],
	},
	danger: {
		viewBox: '0 0 32 32',
		d: [
			'M15.201 28.995c4.28.147 7.799-3.102 7.799-7.144C23 14.707 15.479 10 15.479 10s-6.41 4.012-7.387 10.256c-.68 4.355 2.49 8.583 7.11 8.74Z',
			'M14.356.366a2.675 2.675 0 0 1 2.976.182C19.835 2.436 28 9.37 28 19.34A12.6 12.6 0 0 1 15.489 32a12.041 12.041 0 0 1-9.375-4.451a13.786 13.786 0 0 1-3-10.526A22.054 22.054 0 0 1 7.75 6.394a2.063 2.063 0 0 1 1.65-.826a1.94 1.94 0 0 1 1.284.425a520.028 520.028 0 0 0 2.682-4.634c.238-.412.579-.754.99-.993Zm1.772 1.778a.68.68 0 0 0-.77-.047a.707.707 0 0 0-.258.26c-1.128 1.972-4.372 7.586-4.722 7.991a.074.074 0 0 1-.055.03c-.156 0-.313-.714-.469-1.422c-.153-.697-.305-1.388-.454-1.388a.078.078 0 0 0-.06.039a20.3 20.3 0 0 0-4.242 9.674c-.809 6.3 3.483 12.326 9.752 12.7c.214.013.426.019.637.019A10.587 10.587 0 0 0 26 19.34c0-9.063-7.606-15.486-9.872-17.196Z',
		],
	},
	announcement: {
		viewBox: '0 0 32 32',
		d: [
			'm7.998 23.001l8.613 3.83a1.693 1.693 0 0 0 2.425-1.527v-6.227a3.055 3.055 0 0 0 0-6.107V6.496c0-1.24-1.866-1.793-2.989-1.265L8.012 9.012V9h-4.21C2.808 9 2 9.847 2 10.892v10.216C2 22.153 2.807 23 3.803 23l4.195.001Zm9.038-15.97v17.8l-7.038-3.13V10.29l6.893-3.244h.002a.384.384 0 0 1 .114-.013h.029Z',
			'M24.11 11.07a7.3 7.3 0 0 0-.438-.442c-.637-.59-1.672-.137-1.672.732v.028c0 .271.118.528.317.713a4.986 4.986 0 0 1 1.604 3.667a4.98 4.98 0 0 1-1.604 3.668c-.205.19-.317.46-.317.74c0 .871 1.037 1.322 1.676.73a6.958 6.958 0 0 0 2.242-5.354a6.987 6.987 0 0 0-1.808-4.482Z"/><path d="M23.506 7.975a1.005 1.005 0 0 1-.506-.87a1 1 0 0 1 1.506-.86A10.994 10.994 0 0 1 30 15.768c0 4.07-2.21 7.622-5.495 9.524a1 1 0 0 1-1.506-.862c0-.359.194-.687.505-.867a9.019 9.019 0 0 0 1.86-1.43a8.944 8.944 0 0 0 2.635-6.46a9.004 9.004 0 0 0-4.493-7.698Z',
		],
	},
};
const { viewBox, d } = icons[type];
---

<aside class={`content ${type}`} aria-label={title}>
	<p class="title" aria-hidden="true">
		<span class="icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox={viewBox} width={16} height={16}>
				{d.map((path) => <path fill-rule="evenodd" d={path} />)}
			</svg>
		</span>
		{title}
	</p>
	<section>
		<slot />
	</section>
</aside>

<style>
	aside {
		--aside-color-base: var(--color-base-purple);
		--aside-color-lightness: 70%;
		--aside-accent-color: hsl(var(--aside-color-base), var(--aside-color-lightness));
		--aside-text-lightness: 15%;
		--aside-text-accent-color: hsl(var(--aside-color-base), var(--aside-text-lightness));

		border-inline-start: var(--o-border-size-4) solid var(--aside-accent-color);
		padding: 1rem;
		background-color: hsla(var(--aside-color-base), var(--aside-color-lightness), var(--theme-accent-opacity));
		/* Indicates the aside boundaries for forced colors users, transparent is changed to a solid color */
		outline: var(--o-border-size-1) solid transparent;
	}

	:global(.theme-dark) aside {
		--aside-text-lightness: 85%;
		--aside-color-lightness: 45%;
	}

	.title {
		line-height: 1;
		margin-bottom: 0.5rem;
		font-size: 0.9rem;
		letter-spacing: 0.05em;
		font-weight: bold;
		text-transform: uppercase;
		color: var(--aside-text-accent-color);
	}

	.icon svg {
		width: 1.5em;
		height: 1.5em;
		vertical-align: middle;
		fill: currentcolor;
	}

	aside :global(a),
	aside :global(a > code:not([class*='language'])) {
		color: var(--aside-text-accent-color);
	}

	aside :global(p),
	aside.content :global(ul) {
		color: var(--theme-text);
	}

	:global(.theme-dark) aside :global(code:not([class*='language'])) {
		color: var(--theme-code-text);
	}

	aside :global(pre) {
		margin-left: 0;
		margin-right: 0;
	}

	.tip {
		--aside-color-lightness: 32%;
		--aside-color-base: var(--color-base-teal);
	}
	:global(.theme-dark) aside.tip {
		--aside-color-lightness: 30%;
		--aside-text-lightness: 85%;
	}

	.caution {
		--aside-color-lightness: 45%;
		--aside-color-base: var(--color-base-yellow);
	}
	:global(.theme-dark) aside.caution {
		--aside-color-lightness: 45%;
		--aside-text-lightness: 85%;
	}

	.danger {
		--aside-color-lightness: 54%;
		--aside-color-base: var(--color-base-red);
	}
	:global(.theme-dark) aside.danger {
		--aside-color-lightness: 50%;
		--aside-text-lightness: 85%;
	}

	.announcement {
		--aside-color-lightness: 45%;
		--aside-color-base: var(--color-base-sky);
	}
	:global(.theme-dark) aside.announcement {
		--aside-color-lightness: 40%;
		--aside-text-lightness: 85%;
	}
</style>
